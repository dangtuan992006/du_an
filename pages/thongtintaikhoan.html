<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Account Information</title>
    <!-- icon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <!-- feather icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <!-- font chu logo -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <!-- font chu banana -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alkatra:wght@400..700&family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <!-- Playfair Display font for banner -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <!-- file -->
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/components/header.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/components/product.css" />
    <link rel="stylesheet" href="../css/components/footer.css" />
    <!-- CSS ri√™ng cho banner -->
    <link rel="stylesheet" href="../css/components/banner.css" />
    <!-- mo hinh 3D -->
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
    <style>
      model-viewer {
        width: 100%;
        height: 100%;
        background-color: transparent;
      }
    </style>
    <style>
      /* --- Chat Support --- */
      .chat-support {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9998;
      }
      .chat-support button {
        background: #ff4b5c;
        color: #fff;
        border: none;
        padding: 10px 15px;
        border-radius: 50px;
        font-size: 14px;
        cursor: pointer;
        display: flex;
        align-items: center;
      }
      .chat-support button i {
        margin-right: 5px;
      }
    </style>
    <style>
      /* Topbar Styles */
      .topbar {
        background: #ffd3d3;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .topbar-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      /* Commitment Bar - T·∫§T C·∫¢ C√ôNG 1 H√ÄNG */
      .commitment-bar {
        background: #ffd3d3;
        padding: 12px 0;
      }

      .commitment-link {
        text-decoration: none;
        display: block;
      }

      .commitment-items {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0;
        flex-wrap: nowrap;
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .commitment-items::-webkit-scrollbar {
        display: none;
      }

      /* Cam k·∫øt title */
      .commitment-title {
        color: #a52a2a;
        font-size: 14px;
        font-weight: 600;
        white-space: nowrap;
        padding: 0 8px;
        flex-shrink: 0;
      }

      .commitment-item {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 0 8px;
        white-space: nowrap;
        flex-shrink: 0;
      }

      .commitment-item span {
        color: #27272a;
        font-size: 12px;
        font-weight: 500;
        white-space: nowrap;
      }

      .commitment-item img {
        flex-shrink: 0;
      }

      .divider {
        width: 1px;
        height: 20px;
        background: #ebebf0;
        flex-shrink: 0;
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .commitment-items {
          justify-content: flex-start;
        }
      }

      @media (max-width: 768px) {
        .topbar-container {
          padding: 0 1rem;
        }

        .commitment-bar {
          padding: 8px 0;
        }

        .commitment-title {
          font-size: 13px;
          padding: 0 6px;
        }

        .commitment-item span {
          font-size: 11px;
        }

        .commitment-item {
          padding: 0 6px;
        }
      }

      @media (max-width: 480px) {
        .commitment-title {
          font-size: 12px;
          padding: 0 4px;
        }

        .commitment-item span {
          font-size: 10px;
        }

        .commitment-item img {
          width: 16px;
          height: 16px;
        }

        .divider {
          height: 16px;
        }
      }

      /* Animation */
      .commitment-link:hover {
        opacity: 0.9;
      }

      .commitment-item:hover {
        transform: translateY(-1px);
        transition: transform 0.2s ease;
      }
      /* ƒê·ªïi m√†u icon b·∫±ng filter */
      .commitment-item img {
        flex-shrink: 0;
        filter: hue-rotate(45deg) saturate(2) brightness(0.8); /* M√†u cam */
      }

      /* Ho·∫∑c t·ª´ng icon ri√™ng bi·ªát */
      .commitment-item:nth-child(3) img {
        /* 100% h√†ng th·∫≠t */
        filter: hue-rotate(120deg) saturate(1.5); /* M√†u xanh l√° */
      }

      .commitment-item:nth-child(5) img {
        /* Freeship */
        filter: hue-rotate(120deg) saturate(1.5); /* M√†u xanh l√° */
      }

      .commitment-item:nth-child(7) img {
        /* Ho√†n 200% */
        filter: hue-rotate(120deg) saturate(1.5); /* M√†u xanh l√° */
      }

      .commitment-item:nth-child(9) img {
        /* 30 ng√†y ƒë·ªïi tr·∫£ */
        filter: hue-rotate(120deg) saturate(1.5); /* M√†u xanh l√° */
      }

      .commitment-item:nth-child(11) img {
        /* Giao nhanh 2h */
        filter: hue-rotate(120deg) saturate(1.5); /* M√†u xanh l√° */
      }

      .commitment-item:nth-child(13) img {
        /* Gi√° si√™u r·∫ª */
        filter: hue-rotate(120deg) saturate(1.5); /* M√†u xanh l√° */
      }
    </style>
    <style>
      /* Gi·ªØ nguy√™n layout header */
      main,
      .account-info,
      .order-list,
      .my-account {
        margin: 0 auto;
        padding: 40px 60px;
        max-width: 1200px;
      }

      /* Gi·∫£ l·∫≠p container c·ªßa Bootstrap (safe) */
      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
      }

      /* K·∫ª l·∫°i b·∫£ng: Th√¥ng tin t√†i kho·∫£n (b·∫£ng key-value) */
      .account-card .table.table-bordered {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 10px;
        background-color: #ffffff;
        border: 1px solid #ffd1d1;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: var(--shadow-sm);
        table-layout: fixed;
      }
      .account-card .table.table-bordered th,
      .account-card .table.table-bordered td {
        padding: 16px 18px;
        text-align: left;
        border-right: 1px solid #ffd1d1;
        border-bottom: 1px solid #ffd1d1;
        vertical-align: middle;
        word-break: break-word;
        font-size: 16px;
      }
      .account-card .table.table-bordered tr:last-child td {
        border-bottom: none;
      }
      .account-card .table.table-bordered tr > th:last-child,
      .account-card .table.table-bordered tr > td:last-child {
        border-right: none;
      }
      .account-card .table.table-bordered th {
        background: #fff0f0;
        color: #333;
        font-weight: 600;
        width: 35%;
      }
      .account-card .table.table-bordered tr:hover td {
        background-color: #fff7f7;
      }

      /* Header h·ªì s∆° trong th·∫ª t√†i kho·∫£n */
      .account-header {
        display: flex;
        align-items: center;
        gap: 16px;
        padding-bottom: 16px;
        border-bottom: 1px solid #ffd1d1;
        margin-bottom: 12px;
      }
      .account-avatar {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary-color), #ff7a7a);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 18px;
        box-shadow: 0 6px 14px rgba(211, 47, 47, 0.25);
      }
      .account-meta {
        line-height: 1.2;
      }
      .account-name {
        margin: 0;
        font-size: 20px;
        color: var(--primary-dark);
      }
      .account-email {
        margin: 2px 0 0;
        font-size: 14px;
        color: #666;
      }
      .account-actions {
        margin-left: auto;
      }
      .btn-account {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 14px;
        border-radius: 20px;
        background: var(--primary-color);
        color: #fff;
        border: none;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 6px 12px rgba(211, 47, 47, 0.18);
      }
      .btn-account:hover {
        background: var(--primary-dark);
      }

      /* Nh√£n c√≥ icon cho b·∫£ng key-value */
      .account-card .table.table-bordered th i {
        color: var(--primary-color);
        margin-right: 8px;
        width: 16px;
        text-align: center;
      }

      /* Orders summary card (only shown if user has orders) */
      .orders-summary {
        margin-top: 20px;
        background: #fff;
        border: 1px solid #ffd1d1;
        border-radius: 12px;
        box-shadow: var(--shadow-sm);
        padding: 20px;
      }
      .orders-summary-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 10px;
      }
      .orders-summary-header i {
        color: var(--primary-color);
      }
      .orders-summary-title {
        font-size: 18px;
        font-weight: 700;
        margin: 0;
        color: var(--primary-dark);
      }
      .orders-summary-desc {
        margin: 6px 0 14px;
        color: #555;
      }
      .orders-summary-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
      .btn-outline {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 14px;
        border: 1.5px solid var(--primary-color);
        border-radius: 20px;
        background: #fff;
        color: var(--primary-color);
        font-weight: 700;
        cursor: pointer;
      }
      .btn-outline:hover {
        background: rgba(211, 47, 47, 0.06);
      }

      /* N√∫t ‚ÄúXem‚Äù */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 8px 16px;
        border-radius: 6px;
        background-color: var(--brand);
        color: #fff;
        border: none;
        transition: 0.2s;
      }

      .btn:hover {
        background-color: var(--brand-2);
      }

      /* Ti√™u ƒë·ªÅ */
      h1,
      h2,
      h3 {
        font-family: "Alkatra", sans-serif;
        color: var(--brand);
        text-align: center;
        margin: 20px 0;
      }

      /* CƒÉn th√¥ng tin t√†i kho·∫£n */
      .account-info {
        margin-bottom: 30px;
        line-height: 1.6;
        color: #333;
      }
    </style>
  </head>

  <body>
    <!-- Header Start (synced with index.html) -->
    <!-- Header Start (ƒë·ªìng b·ªô v·ªõi index.html, ch·ªâ format l·∫°i) -->

    <!-- Header End -->
    <!-- Topbar (copied from index.html) -->

    <!-- My Account Start -->
    <div class="my-account">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-10 offset-lg-1 col-md-10 offset-md-1 col-sm-12">
            <div class="tab-content">
              <!-- Tab Th√¥ng tin t√†i kho·∫£n -->
              <div
                class="tab-pane fade show active"
                id="account-tab"
                role="tabpanel"
                aria-labelledby="account-nav"
              >
                <h2 class="section-title">Th√¥ng Tin T√†i Kho·∫£n</h2>
                <div class="account-card">
                  <div class="account-header">
                    <div class="account-avatar" id="accountAvatar">PN</div>
                    <div class="account-meta">
                      <h3 class="account-name" id="accountName">
                        Pomegranate User
                      </h3>
                      <p class="account-email" id="accountEmail">
                        user@example.com
                      </p>
                    </div>
                    <div class="account-actions">
                      <a href="../pages/settings.html" class="btn-account"
                        ><i class="fas fa-user-cog"></i> C·∫≠p nh·∫≠t h·ªì s∆°</a
                      >
                    </div>
                  </div>
                  <div class="table-responsive">
                    <table class="table table-bordered mb-0">
                      <tr>
                        <th><i class="fas fa-id-card"></i>H·ªç v√† t√™n</th>
                        <td id="infoFullName">ƒê·∫∑ng Ng·ªçc Tu·∫•n</td>
                      </tr>
                      <tr>
                        <th><i class="fas fa-envelope"></i>Email</th>
                        <td id="infoEmail">tuandangngoc5@gmail.com</td>
                      </tr>
                      <tr>
                        <th><i class="fas fa-phone"></i>S·ªë ƒëi·ªán tho·∫°i</th>
                        <td id="infoPhone">0939662790</td>
                      </tr>
                      <tr>
                        <th><i class="fas fa-map-marker-alt"></i>ƒê·ªãa ch·ªâ</th>
                        <td id="infoAddress">
                          123 ƒê∆∞·ªùng ABC, Ph∆∞·ªùng XYZ, Qu·∫≠n 1, TP.HCM
                        </td>
                      </tr>
                      <tr>
                        <th>
                          <i class="fas fa-clock"></i>Th·ªùi ƒëi·ªÉm t·∫°o t√†i kho·∫£n
                        </th>
                        <td id="infoCreated">
                          <span class="text-accent">7:30 2023-10-01</span>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <div
                    id="ordersSummary"
                    class="orders-summary"
                    style="display: none"
                  >
                    <div class="orders-summary-header">
                      <i class="fas fa-receipt"></i>
                      <h3 class="orders-summary-title">ƒê∆°n h√†ng c·ªßa t√¥i</h3>
                    </div>
                    <p class="orders-summary-desc" id="ordersSummaryDesc">
                      B·∫°n ƒë√£ c√≥ 0 ƒë∆°n h√†ng ƒë√£ mua.
                    </p>
                    <div class="orders-summary-actions">
                      <a href="../pages/order-history.html" class="btn-outline"
                        ><i class="fas fa-eye"></i> Xem l·∫°i ƒë∆°n h√†ng ƒë√£ mua</a
                      >
                    </div>
                  </div>
                </div>
              </div>

              <!-- Tab ƒê∆°n h√†ng c·ªßa t√¥i: ƒë√£ chuy·ªÉn th√†nh orders summary trong account-card, hi·ªÉn th·ªã c√≥ ƒëi·ªÅu ki·ªán b·∫±ng JS -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- My Account End -->

    <!-- Footer (matched to index.html) -->

    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="../lib/easing/easing.min.js"></script>
    <script src="../lib/slick/slick.min.js"></script>

    <!-- Cart Drawer (same structure as index.html) -->
    <div id="cartOverlay" class="cart-overlay"></div>
    <div id="cartDrawer" class="cart-drawer">
      <div class="cart-drawer-header">
        <h2>üõí Gi·ªè h√†ng</h2>
        <button id="closeCartDrawer" class="close-drawer">√ó</button>
      </div>
      <div id="cartDrawerContent" class="cart-drawer-content"></div>
      <div id="cartDrawerFooter" class="cart-drawer-footer"></div>
    </div>
    <!-- Shared header behavior (same as index) -->
    <script src="../js/footer-include.js" defer></script>
    <script src="../js/search.js" defer></script>
    <script src="../js/mainjs.js" defer></script>
    <script>
      // Populate account header and toggle orders summary visibility
      document.addEventListener("DOMContentLoaded", function () {
        const nameEl = document.getElementById("accountName");
        const emailEl = document.getElementById("accountEmail");
        const avatarEl = document.getElementById("accountAvatar");
        const infoFullNameEl = document.getElementById("infoFullName");
        const infoEmailEl = document.getElementById("infoEmail");
        const infoPhoneEl = document.getElementById("infoPhone");
        const infoAddressEl = document.getElementById("infoAddress");
        const infoCreatedEl = document.getElementById("infoCreated");
        const ordersSummary = document.getElementById("ordersSummary");
        const ordersSummaryDesc = document.getElementById("ordersSummaryDesc");

        const lsName = localStorage.getItem("currentUser");
        const lsEmail = localStorage.getItem("currentUserEmail");
        const usersMapRaw = localStorage.getItem("registeredUsers");
        const usersMap = usersMapRaw ? JSON.parse(usersMapRaw) : {};
        const currentUserObj = lsEmail ? usersMap[lsEmail] || {} : {};

        // Fallbacks to table content if LS empty
        const fullName =
          currentUserObj.name ||
          lsName ||
          (infoFullNameEl ? infoFullNameEl.textContent.trim() : "Ng∆∞·ªùi d√πng");
        const email =
          currentUserObj.email ||
          lsEmail ||
          (infoEmailEl ? infoEmailEl.textContent.trim() : "user@example.com");
        const phone =
          currentUserObj.phone ||
          (infoPhoneEl ? infoPhoneEl.textContent.trim() : "");
        const address =
          currentUserObj.address ||
          (infoAddressEl ? infoAddressEl.textContent.trim() : "");
        const createdIso = currentUserObj.created;

        if (nameEl) nameEl.textContent = fullName;
        if (emailEl) emailEl.textContent = email;
        if (infoFullNameEl) infoFullNameEl.textContent = fullName;
        if (infoEmailEl) infoEmailEl.textContent = email;
        if (infoPhoneEl) infoPhoneEl.textContent = phone || "‚Äî";
        if (infoAddressEl) infoAddressEl.textContent = address || "‚Äî";
        if (infoCreatedEl) {
          const formatted = formatDate(createdIso);
          infoCreatedEl.innerHTML = `<span class="text-accent">${formatted}</span>`;
        }

        // Avatar initials
        function initialsFromName(n) {
          if (!n) return "U";
          const parts = n.trim().split(/\s+/);
          const first = parts[0] ? parts[0][0] : "";
          const last = parts.length > 1 ? parts[parts.length - 1][0] : "";
          return (first + last).toUpperCase();
        }
        if (avatarEl) avatarEl.textContent = initialsFromName(fullName);

        function formatDate(iso) {
          if (!iso) return "‚Äî";
          try {
            const d = new Date(iso);
            const hh = String(d.getHours()).padStart(2, "0");
            const mm = String(d.getMinutes()).padStart(2, "0");
            const yyyy = d.getFullYear();
            const mo = String(d.getMonth() + 1).padStart(2, "0");
            const dd = String(d.getDate()).padStart(2, "0");
            // Format: ng√†y/th√°ng/nƒÉm gi·ªù:ph√∫t
            return `${dd}/${mo}/${yyyy} ${hh}:${mm}`;
          } catch {
            return "‚Äî";
          }
        }

        // Show orders summary only if has orders
        if (lsEmail) {
          try {
            const raw = localStorage.getItem(`orders_${lsEmail}`);
            const orders = raw ? JSON.parse(raw) : [];
            if (Array.isArray(orders) && orders.length > 0) {
              if (ordersSummary) {
                ordersSummary.style.display = "block";
                if (ordersSummaryDesc) {
                  ordersSummaryDesc.textContent = `B·∫°n ƒë√£ c√≥ ${orders.length} ƒë∆°n h√†ng ƒë√£ mua.`;
                }
              }
            }
          } catch (e) {
            // ignore parse errors
          }
        }
      });
    </script>
  </body>
</html>
